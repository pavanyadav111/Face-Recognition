"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[95683],{1872:(e,t,r)=>{r.d(t,{mA:()=>W});var i=r(51220),n=r(87011),a=r(93096),s=r(87519),o=r(48973),l=r(13631),c=r(69670),u=r(5992),d=r(85650),v=r(30500),m=r(81298),p=r(73923),_=r(16835),f=r(31648),h=r(63739),y=r(2463),g=r(29862),b=r(88098),C=r(48007),w=r(24975),S=r(60325),I=r(88969),T=r(98795),A=r(23069),k=r(59044),E=r(31950),P=r(55729),j=e=>{var t,{assets:r}=e,i=(0,k.f0)(r[0]);return{include:"subscriptions",content_type:(0,f.Uw)({assetType:i,assetId:null===(t=r[0])||void 0===t?void 0:t.id}),content_ids:r.reduce((e,t)=>[...e,t.id.toString()],[]).join(",")}},x=e=>{var{assets:t}=e,r={};return t.forEach(e=>{var t=(0,k.f0)(e),i=(0,f.Uw)({assetId:e.id,assetType:t});r[i]=[...r[i]?r[i]:[],e]}),r},N=e=>{var{assetEligibility:t}=e,{permittedLicenses:r,subscriptions:i}=t;return null==i?void 0:i.filter(e=>{var{license:t}=e;return r.includes(t.replace("_unlimited",""))})},O=e=>{var t,{assets:r=[],user:i}=e;return null===(t=Object.values(x({assets:r})))||void 0===t?void 0:t.map(e=>{var t=j({assets:e}),{formattedUrl:r}=(0,s.kE)({urlParams:{licenseeIdentifier:"organization-".concat(null==i?void 0:i.organizationId)},queryParams:t});return E.Bn.get(r)})},L=e=>{var{data:t}=e,r=[];return t.map(e=>{var t=e.id.split("-"),i=t[t.length-1],n=N({assetEligibility:e});return r.push({assetId:i,subscriptions:n})}),r},U=r(30721),F=r(55790),z=r(67974),M=r(84378),D=r(53736),q=r(11407),R=r(33691),B=r(8829),G={[d.jO3]:s.DH,[d.miZ]:s.E6},V=e=>{var t,r,{asset:i,subscriptions:n}=e,a=(0,f.ZC)({asset:i}),{licenseId:s,contentTier:o}=i;switch(a){case l.G_:return(0,w.N)({assetType:l.G_,subscriptions:[...null!==(t=null==n?void 0:n.videoSubscriptions)&&void 0!==t?t:[],...null!==(r=null==n?void 0:n.videoCompSubscriptions)&&void 0!==r?r:[]],selectedLicenseId:s});case l.on:case l.FY:return(0,S.A)({subscriptions:[...n.musicSubscriptions,...n.musicCompSubscriptions],licenseName:i.licenseId});case l.M9:return(0,S.A)({subscriptions:[...n.sfxSubscriptions,...n.sfxCompSubscriptions],licenseName:i.licenseId});case l.uH:return(0,S.A)({subscriptions:[...n.editorialImageSubscriptions,...n.editorialImageCompSubscriptions,...n.editorialVideoSubscriptions,...n.editorialVideoCompSubscriptions],licenseName:i.licenseId,contentTier:o});case l.W1:default:return(0,S.A)({subscriptions:[...n.imageSubscriptions,...n.imageCompSubscriptions],licenseName:i.licenseId,contentTier:o})}},Y=e=>{var{asset:t,subscriptions:r}=e,i=V({asset:t,subscriptions:r});return(0,C.t)({subscription:i})?(0,a._)((0,n._)({},i),{creditPrice:l.Mp,creditType:v.EV}):i},W=()=>{var{isBrandEnterprise:e}=(0,A.P)(),{data:t}=(0,F.R7)(),[r,s]=(0,P.useState)(!1),[v,C]=(0,P.useState)(""),[S,k]=(0,P.useState)({}),{data:j}=(0,U.rA)(),[,x]=(0,D.Ry)(e=>e),N=(0,z.Jz)(),{analytics:V}=(0,z.pn)(),W=(0,p.cv)(V),K=(0,b.H)(W),Q=N||(0,q.vb)(),H=(0,I.i)(),Z=(0,T.Z)(),J=(0,B.mj)(),{locale:$}=(0,m.Y)(),{sendOrderConfirmationEmails:X}=(0,R.k)();return{isLicensing:r,licensingAssetsHandler:(0,P.useCallback)(function(){var r=(0,i._)(function*(r){var{alreadyLicensedAssets:v=[],assets:m=[],cartMetadata:p={},format:b="",licenseeMetadata:S={},isVideoComp:I=!1,licenseMetadata:T={},licensingType:A,selectedAssetSize:P=""}=r,N=(U=(0,i._)(function*(){var r,s=L({data:(yield Promise.all(O({assets:m,user:j}))).map(e=>{var{data:t}=e;return(0,M.A)(t)}).flat()}),o=m.map((r=(0,i._)(function*(e){var t=(0,f.ZC)({asset:e}),{licenseId:r}=e,{subscriptions:i}=(null==s?void 0:s.find(t=>{var{assetId:r}=t;return r===String(e.id)}))||{},{id:o,license:u}=(0,w.N)({assetType:t,subscriptions:i,selectedLicenseId:r})||{},d=yield(0,_.og)({asset:e,format:b,selectedAssetSize:P,licenseName:u,isVideoComp:I});return(0,a._)((0,n._)({},d,P&&y.N[P]&&{comp_size:P},t===l.M9&&{override_filename:"".concat(c.wT,"_").concat(e.id,".").concat(b||d.content_format)},t===l.m$&&{content_provider:l._Y}),{license_name:u,show_modal:!0,subscription_id:o})}),function(e){return r.apply(this,arguments)}));return{licensingPayload:{content:yield Promise.all(o),license_metadata:T,required_cookies:"",decode_hadron_ids:e},orderMetadata:m.map(e=>{var{currency:r,description:i,descriptionLanguageMap:n={},id:a,itemType:s,headline:o,licenseId:l,preview:c={},price:u,priceType:d,src:v,thumb:m,thumbImageUrl:p,title:_,type:f}=e,h=r,y=u,g=d;if(!h||!y||!g){var{creditCurrency:b,creditPrice:C,creditType:w}=Y({asset:e,subscriptions:t});h=h||b,y=y||C,g=d||w}return h&&!F&&(F=h),g&&!z&&(z=g),{description:n[$]||i,formattedPrice:Z({price:y,localeCurrencyOverride:h,priceType:g}),headline:o,id:a,itemType:s,licenseId:l,licenseName:J({licenseName:l}),price:y,priceType:g,thumbnailSrc:v||p||c.url||m,title:_,type:f}})}}),function(){return U.apply(this,arguments)});try{s(!0),C("");var U,F,z,D,q,R,{licensingPayload:B,orderMetadata:V}=yield N(),W=G[A]({urlParams:{licenseeIdentifier:"organization-".concat(null==j?void 0:j.organizationId)}}).formattedUrl,ee=(null==B?void 0:null===(D=B.content)||void 0===D?void 0:D.length)>=45,et=(0,n._)({},(0,g.H)((0,n._)({trackingId:Q},K?{headers:{[u.ed]:K}}:{})),ee?{timeout:3e4}:{}),er=yield E.Bn.post(W,B,et);if(H({assets:m}),x({assets:m,metadata:p,licensedContent:(null===(R=(0,M.A)(er.data))||void 0===R?void 0:null===(q=R.meta)||void 0===q?void 0:q.licensedContent)||[]}),!m.some(e=>{var{licenseId:t}=e;return d.t9I.includes(t)})){var ei=V.filter(e=>!(0,h.en)({alreadyLicensedAssets:v,asset:e}));X({cartTotalCurrency:F,filteredOrderMetadata:ei,licenseMetadata:S,priceType:z})}return C(o.qO),er}catch(e){var en,ea,es=(0,h.nR)({error:e,user:j}),eo=(0,h.A)({assets:m});throw null===(ea=window.NREUM)||void 0===ea||null===(en=ea.addPageAction)||void 0===en||en.call(ea,"Enterprise licensing error",(0,a._)((0,n._)({},es),{alreadyLicensedAssets:v,assets:m.map(e=>{var{id:t,type:r}=e;return{id:t,type:r}}),cartMetadata:p,format:b,licenseeMetadata:S,licenses:eo,isVideoComp:I,licenseMetadata:T,licensingType:A,selectedAssetSize:P})),k(e),C(o.Nz),e}finally{s(!1)}});return function(e){return r.apply(this,arguments)}}(),[j,e,$,Z,J,t,Q,H,x,X,K]),licensingError:S,licensingStatus:v,setIsLicensing:s,setLicensingStatus:C}}},3399:(e,t,r)=>{r.d(t,{h:()=>c});var i=r(30500),n=r(71335),a=r(59658),s=r(2450),o=r(60325),l=e=>{var{acc:t,totalCostOfItems:r,amountRemaining:n,totalAmount:a,bypassLowBalance:s=!1}=e;return s||(r>n&&(t.hasInsufficientSubscriptionCredits=!0,t.hasLowDebitableBalance=!1,t.insufficientAmount=r-n),!t.hasInsufficientSubscriptionCredits&&n<=a*i.O7&&(t.hasLowDebitableBalance=!0)),t},c=e=>{var{items:t,subscriptions:r,subscription:c,hasWrapperSubscription:u=!0}=e;if(t&&t.length){var d={hasInsufficientSubscriptionCredits:!1,hasLowDebitableBalance:!1,insufficientAmount:0,total:0,totalCreditAmount:0,amountType:i.EV};return t.reduce((e,t)=>{var d,{licenseId:v,price:m}=t,p=(0,a.W)({assets:[t]}),_=c||(0,o.A)({subscriptions:null===(d=(0,s.s)({assetType:p,subscriptions:r}))||void 0===d?void 0:d.subscriptions,licenseName:v,assetType:p})||{},{totalAmount:f,amountRemaining:h,amountType:y,amount:g}=(0,n.hY)(_);e.amountType=y;var b=parseFloat(m),C=parseFloat(e.total)+b;if(e.total+=b,y===i.zy){var w=parseFloat(g),S=parseFloat(e.totalCreditAmount)+w;return e.totalCreditAmount+=w,l({acc:e,totalCostOfItems:S,amountRemaining:h,totalAmount:f,bypassLowBalance:!u})}return l({acc:e,totalCostOfItems:C,amountRemaining:h,totalAmount:f,bypassLowBalance:!u})},d)}var v=r||{},m=Object.keys(v).find(e=>Array.isArray(v[e])&&v[e].length),p=m&&(0,n.j6)({subscriptions:v[m]||[]})[0]||{},{totalAmount:_,amountRemaining:f,amountType:h}=(0,n.hY)(p);return{amountType:h,hasInsufficientSubscriptionCredits:!1,hasLowDebitableBalance:f<=_*i.O7,insufficientAmount:null}}},8829:(e,t,r)=>{r.d(t,{mj:()=>c});var i=r(26114),n=r(2168),a=r(23069),s=r(68880),o=r(55729),l="ent:license_",c=()=>{var{t:e}=(0,s.Bd)([i.Xek,i.fW6]),{isBrandSstk:t}=(0,a.P)();return(0,o.useCallback)(function(){var r,a,s,o,c,u,{licenseName:d,subscription:v}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(d&&(r="".concat(l).concat(null==d?void 0:d.replace(/_unlimited/,""))),v){if(t){if((0,n.l2)({productName:null==v?void 0:null===(a=v.product)||void 0===a?void 0:a.name}))return e(r="".concat("product-names:").concat(null===(o=v.product)||void 0===o?void 0:o.name),{ns:i.fW6});r="".concat("ecomm:license_").concat(null===(s=v.product)||void 0===s?void 0:s.name)}!t&&v.redeemableFor&&(r="".concat(l).concat(null===(c=v.redeemableFor)||void 0===c?void 0:c.replace(/_unlimited/,""))),!t&&v.license&&(r="".concat(l).concat(null===(u=v.license)||void 0===u?void 0:u.replace(/_unlimited/,"")))}return r?e(r):""},[t,e])}},14236:(e,t,r)=>{r.d(t,{CN:()=>b,e4:()=>_,jZ:()=>f,lw:()=>g,sD:()=>C});var i=r(51220),n=r(87011),a=r(93096),s=r(16969),o=r(87519),l=r(13631),c=r(85650),u=r(56879),d=r(31648),v=r(59044),m=r(31058),p=r(31950),_=function(){var e=(0,i._)(function*(e){var{assets:t,compSize:r,licensedContent:i,supplementalUrlType:n}=e,{downloadUrl:a,contentId:s,contentFormat:l,contentSize:c,supplementalUrls:d}=i[0]||{};if((null==d?void 0:d.length)&&n){var{url:m=a}=d.find(e=>{var{type:t}=e;return t===n})||{};return m}var _=t.find(e=>{var{id:t}=e;return t===s})||{},f=(0,v.f0)(_),{filename:h,shouldUpdateFilename:y}=(0,u.V)({assets:t,contentId:s});if(y)try{var{data:g}=yield p.Bn.post((0,o.Xt)().formattedUrl,{data:[{media_id:_.id,media_type:f,comp_size:r,media_size:c,media_format:l,filename:h}]}),{attributes:b}=(null==g?void 0:g.data[0])||{};return b.url||a}catch(e){}return a});return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,i._)(function*(e){var{assets:t=[],compSize:r,assetSize:i,licensedContent:n=[],downloader:a=m.Bx}=e;if(n.length>1){var o=(0,u.P)({assets:t,licensedContent:n}),l=(0,s.E)({urlParams:{filename:o.bundleFilename}}).formattedUrl,{data:c}=yield p.a8.post(l,o.content),{public_url:d}=c;return a(d)}return a((yield _({assets:t,compSize:r,assetSize:i,licensedContent:n})))});return function(t){return e.apply(this,arguments)}}(),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(e=>{var t=(0,d.xB)({asset:e});return(0,a._)((0,n._)({},e),{assetType:t,licenseId:c.H8E[t]})})},y=function(){var e=(0,i._)(function*(){var{url:e}=(0,o.PX)();try{return(yield p.Bn.get(e).then(e=>null==e?void 0:e.data)).reduce((e,t)=>(0,a._)((0,n._)({},e),{[t.name]:"-"}),{})}catch(e){return{}}});return function(){return e.apply(this,arguments)}}(),g=function(){var e=(0,i._)(function*(){var{assets:e,assetSize:t,format:r,metadata:i,selectedAssetSize:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i;return a||(a=yield y()),{assets:h(e),format:r||"",licenseMetadata:a,licensingType:c.jO3,selectedAssetSize:t||n||"",isVideoComp:!0}});return function(){return e.apply(this,arguments)}}(),b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,d.ZC)({asset:e[0]||{}})===l.FY},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[l.vo,l.W1,l.kc].includes((0,d.ZC)({asset:e[0]||{}}))}},15549:(e,t,r)=>{r.d(t,{p:()=>n});var i=r(71024),n=r.n(i)()(()=>Promise.all([r.e(27510),r.e(74782)]).then(r.bind(r,25742)).then(e=>({default:e.SignUpModal})),{loadableGenerated:{webpack:()=>[25742]},ssr:!1})},16319:(e,t,r)=>{r.d(t,{k:()=>n});var i=r(9031),n=()=>{var{checkGate:e}=(0,i.cn)();return e("lego-2245-ledger-low-balance")}},27542:(e,t,r)=>{r.d(t,{l:()=>n});var i=r(59067),n=e=>{var t,{user:r}=e;return null==r?void 0:null===(t=r.roles)||void 0===t?void 0:t.includes(i.lc)}},30682:(e,t,r)=>{r.d(t,{b:()=>o,q:()=>s});var i=r(30500),n=r(59044),a=r(48007),s=e=>{var{uniqueSubscription:t}=e;if(!t)return{};var{priceAsAbsolute:r,creditCurrency:s,product:o}=t,l=(0,a.t)({subscription:t}),c=null!=s?s:null==o?void 0:o.currency;if(!r){var{creditPrice:u,creditType:d=i.EV}=t;return{price:"".concat((0,n.YO)({price:u,isUnlimited:l})),priceType:d,currency:c}}var{price:v,priceType:m}=r;return{price:"".concat((0,n.YO)({price:v,isUnlimited:l})),priceType:m,currency:c}},o=e=>{var{uniqueSubscription:t}=e;if(!t)return{};var{currency:r,currencyCost:a}=t;return{price:"".concat((0,n.YO)({price:a,isUnlimited:!1})),priceType:i.EV,currency:r}}},33691:(e,t,r)=>{r.d(t,{k:()=>w});var i=r(26114),n=r(87778),a=r(83913),s=r(49873),o=r(81298),l=r(79677),c=r(98795),u=r(78524),d=r(30721),v=r(19758),m=r(5513),p=r(31950),_=r(63228),f=r(68880),h=r(55729),y=new RegExp(s.X),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{emailCartCheckoutConfirmation:t,orderEmail:r}=e;return t&&r?r.split(",").filter(e=>y.test(e)):[]},b=e=>{var{purchaseOrder:t}=e;return"".concat(null==t?void 0:t[0]," : ").concat(null==t?void 0:t[1]).split(" ").map(e=>(0,_.Z)(e)).join(" ")},C=e=>{var{t,keys:{currentYear:r,emailAddress:i,purchaseOrder:n}}=e;return{copyright:t("site-footer:copyright",{CURRENT_YEAR:r}),emailSentTo:t("ent:email_sent_to",{EMAIL_ADDRESS:i}),emailSubjectLine:"".concat(t("ent:order_confirmation_email_subject")," | ").concat(b({purchaseOrder:n})),name:t("account:profile_name"),needAssistance:t("ent:contact_sales_representative"),orderConfirmation:t("ent:order_confirmation"),purchaseInformation:t("ent:purchase_information_key"),shutterstockAddress:t("tos:tos_2020_09_04_part_v_24_table_r2_c2_l2"),shutterstockInc:t("tos:tos_2020_09_04_part_v_24_table_r2_c2_l1"),subtotal:t("ent:order_confirmation_email_subtotal"),thisIsNotAnInvoice:t("ent:not_an_invoice")}},w=()=>{var{t:e}=(0,f.Bd)(i._RK),{data:t}=(0,d.rA)(),{data:r}=(0,v.M)(),{data:s}=(0,u.M)(),{name:_,email:y,phone:b}=(0,m.e)({fetchTrigger:!0})||{},{locale:w,fullLocale:S}=(0,o.Y)(),I=(0,c.Z)();return{sendOrderConfirmationEmails:(0,h.useCallback)(function(){var{cartTotalCurrency:i,filteredOrderMetadata:o,licenseMetadata:c,priceType:u}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=[...(null==r?void 0:r.emailCartCheckoutConfirmation)?[null==t?void 0:t.email]:[],...g(s)];if(d.length&&(null==o?void 0:o.length)){var v,m,f,h,T=C({t:e,keys:{currentYear:new Date().getFullYear(),emailAddress:null==t?void 0:t.email,purchaseOrder:Object.entries(c)[0],repName:_,repPhoneNumber:b,repEmail:y}});try{var A={cartItems:o,fullName:null==t?void 0:t.fullName,invoiceDate:new Intl.DateTimeFormat(S).format(new Date),labels:T,licenseMetadata:c,repEmail:y,repName:_,repPhoneNumber:b,totalAmount:I({price:(0,l.bc)(o,[]),localeCurrencyOverride:i,priceType:u}),username:null==t?void 0:t.username};p.Y$.post((0,n.J9)().formattedUrl,{emails:[...new Set(d)],emailBody:A,emailSubject:"".concat(T.emailSubjectLine),language:w})}catch(e){null===(m=window.NREUM)||void 0===m||null===(v=m.setTransactionName)||void 0===v||v.call(m,"sendOrderConfirmationEmail/".concat(a.o5)),null===(h=window.NREUM)||void 0===h||null===(f=h.noticeError)||void 0===f||f.call(h,e,{message:"Failed sending order confirmation emails to: ".concat(d.join(", "))})}}},[S,w,s,I,y,_,b,e,null==t?void 0:t.email,null==t?void 0:t.fullName,null==t?void 0:t.username,null==r?void 0:r.emailCartCheckoutConfirmation])}}},36165:(e,t,r)=>{r.d(t,{Y:()=>a});var i=r(27542),n=r(30721),a=e=>{var{data:t}=(0,n.rA)();return(0,i.l)({user:t})?null==e?void 0:e.compSizeImage:null==e?void 0:e.compSizeSubImage}},36479:(e,t,r)=>{r.d(t,{Df:()=>p,WP:()=>v,Xl:()=>l,bE:()=>u,bR:()=>f,cb:()=>d,dt:()=>c,fh:()=>_,h_:()=>m,vY:()=>y,vv:()=>h});var i=r(87011),n=r(93096),a=r(14264),s=r(40252),o=e=>{var{urlParams:t={},queryParams:r={}}=e,n="/cart/".concat(t.isPrimary?a.jT:a.pw),o=(0,i._)({},r);return{url:n,defaultParams:o,formattedUrl:(0,s.format)({pathname:n,query:o})}},l=function(){var{urlParams:e={},queryParams:t={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=o({urlParams:e,queryParams:t}),a=(0,i._)({},r.defaultParams);return(0,n._)((0,i._)({},r),{defaultParams:a,formattedUrl:(0,s.format)({pathname:r.url,query:a})})},c=o,u=o,d=e=>{var{urlParams:t={},queryParams:r={}}=e,n="/cart/".concat(t.fromCartType,"/to/").concat(t.toCartType),a=(0,i._)({},r);return{url:n,defaultParams:a,formattedUrl:(0,s.format)({pathname:n,query:a})}},v=e=>{var{urlParams:t={}}=e,r="/organization/".concat(t.organizationId,"/invitations/").concat(t.status);return{url:r,formattedUrl:(0,s.format)({pathname:r})}},m=e=>{var{urlParams:t={}}=e,r="/account/user/".concat(t.id,"/settings");return{url:r,formattedUrl:(0,s.format)({pathname:r})}},p=e=>{var{urlParams:t={}}=e,r="/account/user/".concat(t.id,"/settings");return{url:r,formattedUrl:(0,s.format)({pathname:r})}},_=e=>{var{urlParams:t={}}=e,r="/organization/".concat(t.organizationId,"/invitations/").concat(t.invitationId);return{url:r,formattedUrl:(0,s.format)({pathname:r})}},f=e=>{var{urlParams:t={}}=e,r="/organization/".concat(t.organizationId,"/invitations");return{url:r,formattedUrl:(0,s.format)({pathname:r})}},h=e=>{var{urlParams:t={}}=e,r="/organization/users/".concat(t.id);return{url:r,formattedUrl:(0,s.format)({pathname:r})}},y=function(){var{queryParams:e={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="/cart/".concat(a.jT,"/quote"),r=(0,n._)((0,i._)({},e),{exclude_comps:1,expand:"agreements"});return{url:t,defaultParams:r,formattedUrl:(0,s.format)({pathname:t,query:r})}}},36640:(e,t,r)=>{r.d(t,{A:()=>n});var i=r(21075),n=()=>{var e=(0,i.h)();return null==e?void 0:e.userCanViewPortfolio}},56879:(e,t,r)=>{r.d(t,{P:()=>c,V:()=>l});var i=r(59044),n=r(93595),a="shutterstock",s="shutterstock_editorial",o=e=>{var{asset:t}=e;return(0,i.Uh)(t)?{prefix:"shutterstock_offset",shouldUpdateFilename:!0}:(0,i.zz)({asset:t})?{prefix:s,shouldUpdateFilename:!1}:{prefix:a,shouldUpdateFilename:!1}},l=e=>{var{assets:t,contentId:r}=e,{prefix:i,shouldUpdateFilename:n}=o({asset:t.find(e=>{var{id:t}=e;return t===r})||{}});return{filename:"".concat(i,"_").concat(r),shouldUpdateFilename:n}},c=e=>{var{assets:t=[],licensedContent:r=[]}=e,o=t.every(e=>(0,i.zz)({asset:e})),c=r.map(e=>{var{contentId:r,downloadUrl:i,contentFormat:n}=e,{filename:a}=l({assets:t,contentId:r}),s=i.split("/").pop().split(".").pop();return(s.length>4||s.length<2)&&(s=n),{filename:"".concat(a,".").concat(s),url:i}}),u=(0,n.kX)();return{bundleFilename:"".concat(o?s:a,"_").concat(u,".zip"),content:c}}},62430:(e,t,r)=>{r.d(t,{S:()=>s});var i=r(13631),n=r(95807),a=r(96887),s=e=>{var{assetType:t,subscriptions:r,selectedLicenseId:s}=e;switch(t){case i.G_:return(0,a.K)({licenseName:s,subscriptions:r});case i.FY:case i.on:case i.M9:case i.W1:default:return(0,n.V)({subscriptions:r,licenseName:s})}}},63228:(e,t,r)=>{r.d(t,{Z:()=>i});var i=e=>e&&"string"==typeof e?"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)):""},64984:(e,t,r)=>{r.d(t,{x:()=>N});var i=r(51220),n=r(26114),a=r(60662),s=r(77222),o=r(82078),l=r(98848),c=r(67666),u=r(36165),d=r(1872),v=r(78524),m=r(68880),p=r(55729),_=r(6029),f=r(61266),h=r(87011),y=r(92424),g=r(13304),b=r(71024),C=r.n(b),w=C()(()=>r.e(3530).then(r.bind(r,40602)).then(e=>({default:e.CompLicensingDialog})),{loadableGenerated:{webpack:()=>[40602]},ssr:!1}),S=e=>{var{isOpen:t}=e,r=(0,y._)(e,["isOpen"]);return(0,g.G)(t)&&(0,_.jsx)(w,(0,h._)({isOpen:t},r))},I=C()(()=>Promise.all([r.e(27510),r.e(69108),r.e(77618),r.e(43366),r.e(23100),r.e(11988),r.e(25133)]).then(r.bind(r,27075)).then(e=>({default:e.CompLicensingDrawer})),{loadableGenerated:{webpack:()=>[27075]},ssr:!1}),T=e=>{var{isOpen:t}=e,r=(0,y._)(e,["isOpen"]);return(0,g.G)(t)&&(0,_.jsx)(I,(0,h._)({isOpen:t},r))},A=C()(()=>r.e(55459).then(r.bind(r,11755)).then(e=>({default:e.CompLicensingSnackbar})),{loadableGenerated:{webpack:()=>[11755]},ssr:!1}),k=e=>{var{isOpen:t}=e,r=(0,y._)(e,["isOpen"]);return(0,g.G)(t)&&(0,_.jsx)(A,(0,h._)({isOpen:t},r))},E=r(63739),P=function(){var{licensingError:e={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{t}=(0,m.Bd)(n.mAv);return{cancel:t("common:actions_cancel"),downloadComp:t("common:actions_download_comp"),enterpriseCompLicense:t("ent:license_enterprise_comp"),genericErrorMessage:t("ent:license_now_error_message"),licensingError:(0,E.KC)({error:e,t}),licenseSuccess:t("ent:confirmation_alert_message"),licenseFormLabels:{buttonLabel:t("common:actions_download_comp"),disclaimer:(0,_.jsx)(m.x6,{i18nKey:"ent:comp_disclaimer",ns:n.mAv,components:{bold:(0,_.jsx)("strong",{})}}),addMetadataToAsset:t("ent:add_metadata_to_asset_comp"),metadataFound:t("ent:previous_metadata_found_comp"),metadataMissing:t("ent:previous_metadata_missing_comp"),title:t("ent:add_metadata_to_comp")}}},j=e=>{var{assets:t=null,compLicensingHandler:r,isDialogOpen:i=!1,isDrawerOpen:n=!1,isLicensing:a=!1,isSnackBarOpen:s=!1,licensingError:o=f.vB,onDialogClose:l,onDrawerClose:c,onSnackbarClose:u,selectedAssetSize:d="",setSelectedAssetSize:v,settingsData:m=f.vB}=e,p=P({licensingError:o});return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(S,{assets:t,isOpen:i,onClose:l,onLicense:r,labels:p,isLicensing:a,selectedAssetSize:d,setSelectedAssetSize:v,settingsData:m}),(0,_.jsx)(T,{assets:t,isLicensing:a,isOpen:n,labels:p,onClose:c,onLicense:r,selectedAssetSize:d}),(0,_.jsx)(k,{isOpen:s,message:p.licensingError,onClose:u})]})},x=r(14236),N=function(){var e,t,r,{allowMetadata:_=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[f,h]=(0,p.useState)(null),[y,g]=(0,p.useState)(""),[b,C]=(0,p.useState)(""),[w,S]=(0,p.useState)(!1),[I,T]=(0,p.useState)(!1),[A,k]=(0,p.useState)(!1),{isLicensing:E,licensingError:P,licensingStatus:N,setLicensingStatus:O,licensingAssetsHandler:L}=(0,d.mA)(),U=(0,o.$)(),{data:F}=(0,v.M)(),z=(0,u.Y)(F),M=(0,a.Q)(),{t:D}=(0,m.Bd)(n.EJ3),q=D("file_name_edited"),{getSearchContext:R}=(0,l.J)(),{queueIpReview:B}=(0,c.F)({trackingId:null===(r=R())||void 0===r?void 0:r.search_tracking_id}),G=(0,p.useCallback)((e=(0,i._)(function*(e){var{assets:t=[],assetSize:r,eventLabel:i,format:n,metadata:a,pageSection:s,listId:o}=e;g(t[0].id);var l=!1;try{var c=yield(0,x.lw)({assets:t,assetSize:r,format:n,metadata:a,selectedAssetSize:b}),{data:u}=yield L(c);if(!((0,x.CN)(t)&&1===t.length)){var d,v,m=(0,x.sD)(t)?z:void 0,p=(null==M?void 0:null===(d=M.current)||void 0===d?void 0:d.isPeacock)?e=>{var r;return M.current.downloader.resolveUrl(t[0],e,q,null==u?void 0:null===(r=u.meta)||void 0===r?void 0:r.licensedContent)}:void 0;yield(0,x.jZ)({assets:t,compSize:m,licensedContent:null==u?void 0:null===(v=u.meta)||void 0===v?void 0:v.licensedContent,downloader:p}),U({assets:t,eventLabel:i,isRedownload:!1,isQuickDownload:!1,isPaid:!1,isComp:!0,pageSection:s,listId:o})}}catch(e){l=e}return B(t),g(""),l&&!I&&k(!0),{error:l}}),function(t){return e.apply(this,arguments)}),[I,z,L,U,b,q,M,B]),V=(0,p.useCallback)((t=(0,i._)(function*(e){var{assets:t,assetSize:r,format:i,eventLabel:n,metadata:a,pageSection:o,listId:l}=e;return(h(t),O(""),!w&&(0,s.wy)(t))?(S(!0),Promise.resolve(null)):!I&&(null==F?void 0:F.requireMetadataForComp)&&!a&&_?(r&&C(r),T(!0),Promise.resolve(null)):G({assets:t,assetSize:r,eventLabel:n,format:i,metadata:a,pageSection:o,listId:l})}),function(e){return t.apply(this,arguments)}),[_,G,w,I,F,O]),Y=(0,p.useMemo)(()=>({assets:f,compLicensingHandler:V,compLicensingRequest:G,isDialogOpen:w,isDrawerOpen:I,isLicensing:E,isSnackBarOpen:A,licensingError:P,onDialogClose:()=>S(!1),onDrawerClose:()=>T(!1),onSnackbarClose:()=>k(!1),selectedAssetSize:b,setSelectedAssetSize:C,settingsData:F}),[f,V,G,w,I,E,A,P,b,F]);return{assetsToLicense:f,compLicensingHandler:V,compLicensingProps:Y,CompLicensingViews:j,licensingAssetId:y,licensingStatus:N}}},66092:(e,t,r)=>{r.d(t,{_B:()=>J,Ym:()=>Z,ng:()=>ee,Nc:()=>et,_R:()=>$,Fh:()=>X,tS:()=>er,gz:()=>en});var i=r(51220),n=r(87011),a=r(93096),s=r(92424),o=r(36479),l=r(48973),c=r(32598),u=r(38436),d=r(13631),v=r(14264),m=r(45307),p=r(15261),_=r(30500),f=r(93417),h=r(73923),y=r(16835),g=r(31648),b=r(59044),C=r(44783),w=r(71335),S=r(68958),I=e=>{var{items:t,assetEligibleSubscriptions:r,canShowLedgerLowBalance:i}=e,n={hasInsufficientSubscriptionCredits:!1,hasLowDebitableBalance:!1,insufficientAmount:0,total:0,totalCreditAmount:0,amountType:_.mz};return t.reduce((e,t)=>{var a,{licenseId:s,price:o,id:l}=t,c=null==r?void 0:null===(a=r[l])||void 0===a?void 0:a.licenseSubscriptions.find(e=>e.license===s);if(!c)return n;var{totalPrepaidAmount:u,prepaidAmountRemaining:d,currency:v}=c,m=parseFloat(o),p=parseFloat(e.total)+m;return e.total+=m,p>d&&(e.hasInsufficientSubscriptionCredits=!0,e.hasLowDebitableBalance=!1,e.insufficientAmount=p-d),e.hasLowDebitableBalance=(0,S.I)({canShowLedgerLowBalance:i,hasInsufficientSubscriptionCredits:e.hasInsufficientSubscriptionCredits,units:v,amount:d,initialCommitment:u}),e},n)},T=r(22207),A=r(48007),k=r(85076),E=r(60325),P=r(30682),j=r(57160),x=r(62430),N=r(67666),O=r(16319),L=r(55790),U=r(21075),F=r(31950),z=r(93251),M=r(71616),D=r(81278),q=r(55729),R=r(26988),B=r(98848),G=r(30721),V="Size limit warning",Y=e=>{var t,{item:r,subscriptions:i}=e,{itemType:n,metadata:a}=r,s=(0,b.Q)({asset:r}),o=null==a?void 0:null===(t=a.cart)||void 0===t?void 0:t.licenseId,{allSubscriptions:l}=i;switch(n){case d.G_:return(0,j.d)({licenseName:o,subscriptions:l});case d.FY:case d.M9:case d.W1:default:return(0,E.A)({licenseName:o,subscriptions:l,assetType:n,contentTier:s})}},W=e=>{var t,r,{item:i}=e;return(null===(t=i.largeThumb)||void 0===t?void 0:t.url)||(null===(r=i.preview)||void 0===r?void 0:r.url)||i.preview||i.thumb||""},K=e=>{var t,{asset:r}=e;return r.itemType===d.W1&&!r.sizes&&!(null===(t=r.metadata)||void 0===t?void 0:t.cart.sizes)},Q=e=>{var t,r,{item:i}=e,s=(0,b.$9)(i);if(i.itemType===d.m$){var o,l,c,v,m,p,_,f,h,y,g,w=null==i?void 0:null===(f=i.product)||void 0===f?void 0:null===(_=f.productPreviews[0])||void 0===_?void 0:null===(p=_.previewThumbnailImages)||void 0===p?void 0:p.find(e=>{var{resolution:t}=e;return"res600x600"===t}),S={[u.jx]:{height:600,width:600,src:"https://".concat(null==w?void 0:null===(h=w.assetFile)||void 0===h?void 0:h.s3Path)}};return{[u.jx]:{height:600,width:600,src:(0,C.c0)((0,a._)((0,n._)({},i),{angle:null==i?void 0:null===(g=i.metadata)||void 0===g?void 0:null===(y=g.cart)||void 0===y?void 0:y.angle,displays:S}))}}}return s?{[u.pI]:{height:i.height||(null===(t=i.preview)||void 0===t?void 0:t.height),width:i.width||(null===(r=i.preview)||void 0===r?void 0:r.width),src:i.preview||i.thumb}}:{[u.jx]:{height:(null===(o=i.largeThumb)||void 0===o?void 0:o.height)||(null===(l=i.preview)||void 0===l?void 0:l.height),width:(null===(c=i.largeThumb)||void 0===c?void 0:c.width)||(null===(v=i.preview)||void 0===v?void 0:v.width),src:null===(m=i.preview)||void 0===m?void 0:m.url}}},H=e=>{var t,r,i,s,o,l,c,v,m,_,f,y,g,{item:b,price:C,priceType:w,currency:S,subscriptionId:I,hasCreditsRemaining:T,isUnlimited:A,isUnavailableSubscription:k}=e,E=Q({item:b}),P=W({item:b}).replace("-150nw","-260nw")||(null==E?void 0:null===(t=E[u.jx])||void 0===t?void 0:t.src),j=null===(r=b.assets)||void 0===r?void 0:r.find(e=>{var{assetClass:t}=e;return t===p.Iw}),x=[d.m$,d.W1].includes(b.itemType)&&!b.src,N=null===(i=b.meta)||void 0===i?void 0:i.search_context;return(null===(o=b.metadata)||void 0===o?void 0:null===(s=o.cart)||void 0===s?void 0:s.searchContext)&&(N=(0,h.fF)({trackingId:null===(_=b.metadata)||void 0===_?void 0:null===(m=_.cart)||void 0===m?void 0:null===(v=m.searchContext)||void 0===v?void 0:v.searchTrackingId,searchTerm:null===(g=b.metadata)||void 0===g?void 0:null===(y=g.cart)||void 0===y?void 0:null===(f=y.searchContext)||void 0===f?void 0:f.searchTerm})),(0,n._)((0,a._)((0,n._)((0,a._)((0,n._)({},b),{id:b.itemId}),[d.W1,d.m$,d.uH,d.rr].some(e=>e===b.itemType)&&{image:{id:b.itemId,categories:b.categories,description:b.description||b.subhead||"",url:P,isEditorial:!!b.isEditorial,isPremium:!!b.isPremium,displays:E,permalink:b.permalink,isIllustration:b.isIllustration,isVector:b.isVector}}),{type:b.itemType,isFootageSelect:b.footageSelect,price:C,priceType:w,waveformPng:b.waveformPng||(null==j?void 0:j.externalUrl),currency:S,licenseId:(null===(c=b.metadata)||void 0===c?void 0:null===(l=c.cart)||void 0===l?void 0:l.licenseId)||"",subscriptionId:I,hasCreditsRemaining:T,isPixelSquid:b.itemType===d.m$,isUnavailableAsset:K({asset:b}),isUnlimited:A,isUnavailableSubscription:k,meta:(0,n._)({},N?{search_context:N}:{})}),x&&{src:P})},Z=e=>{var{cartItems:t=[],subscriptions:r}=e;return t.filter(e=>[d.W1,d.m$,d.G_,d.FY,d.M9,d.uH,d.rr].includes(e.itemType)).map(e=>{var t=Y({item:e,subscriptions:r}),{price:i=0,priceType:n=_.EV}=(0,P.q)({uniqueSubscription:t});return H({item:e,price:i,priceType:n,currency:(null==t?void 0:t.creditCurrency)||"",subscriptionId:(null==t?void 0:t.id)||"-",isUnavailableSubscription:!t,hasCreditsRemaining:(0,T.X)({subscription:t}),isUnlimited:(0,A.t)({subscription:t})})})},J=e=>{var{isPrimary:t,isLedger:r=!1}=e;return(0,o.Xl)((0,n._)({urlParams:{isPrimary:t}},r&&{queryParams:{isLedger:r}})).formattedUrl},$=e=>{var{isPrimary:t}=e,r=(0,z.jE)(),s=(0,G.i9)(),{data:o}=(0,L.R7)(),l=J({isPrimary:t}),{data:c,error:u,isLoading:d}=(0,M.I)({queryKey:[l],enabled:!!(s&&o),queryFn:()=>F.C2.get(l).then(e=>{var{data:t}=e;return t&&(0,a._)((0,n._)({},t),{items:Z({cartItems:t.items,subscriptions:o})})}).catch(e=>{var t,r;throw null===(r=window.NREUM)||void 0===r||null===(t=r.recordCustomEvent)||void 0===t||t.call(r,f.s,{url:l,errorMessage:e.message,errorStack:e.stack}),e})});return{data:c,error:u,isLoading:d,mutate:function(){var e=(0,i._)(function*(e){return e?r.setQueryData([l],e):r.invalidateQueries({queryKey:[l]})});return function(t){return e.apply(this,arguments)}}()}},X=e=>{var{isPrimary:t}=e,r=(0,z.jE)(),s=(0,G.i9)(),o=J({isPrimary:t,isLedger:!0}),{data:l}=(0,M.I)({queryKey:[o],enabled:s,queryFn:()=>F.C2.get(o).then(e=>{var{data:t}=e;return t&&(0,a._)((0,n._)({},t),{items:t.items.filter(e=>[d.W1,d.m$,d.G_,d.FY,d.M9,d.uH,d.rr].includes(e.itemType))})}).catch(e=>{var t,r;throw null===(r=window.NREUM)||void 0===r||null===(t=r.recordCustomEvent)||void 0===t||t.call(r,f.s,{url:o,errorMessage:e.message,errorStack:e.stack}),e})});return{data:l,mutate:function(){var e=(0,i._)(function*(e){return e?r.setQueryData([o],e):r.invalidateQueries({queryKey:[o]})});return function(t){return e.apply(this,arguments)}}()}},ee=e=>{var{cartItems:t=[],assetEligibleSubscriptions:r}=e;return t.map(e=>{var t,{id:i,itemType:n,metadata:{cart:{licenseId:a}={}}={}}=null!=e?e:{},s=(0,x.S)({assetType:n,subscriptions:null==r?void 0:null===(t=r[i])||void 0===t?void 0:t.licenseSubscriptions,selectedLicenseId:a}),{price:o=0,priceType:l=_.EV}=(0,P.b)({uniqueSubscription:s});return H({item:e,price:o,priceType:l,currency:(null==s?void 0:s.currency)||(null==s?void 0:s.creditCurrency)||"",subscriptionId:(null==s?void 0:s.id)||"-",isUnavailableSubscription:!s,hasCreditsRemaining:!0,isUnlimited:(0,A.t)({subscription:s})})})},et=()=>{var e,t=(0,z.jE)(),[r,s]=(0,q.useState)({status:"",error:void 0}),[u,p]=(0,q.useState)(!1),_=(0,q.useRef)(!1),{productAddedAnalyticsEvent:f,cartViewedAnalyticsEvent:h,productRemovedAnalyticsEvent:b}=(0,R.f)(),{getSearchContext:C}=(0,B.J)(),w=(0,D.useRouter)(),{queueIpReview:S}=(0,N.F)({trackingId:null===(e=C())||void 0===e?void 0:e.search_tracking_id}),I=(0,q.useCallback)(e=>{void 0===(null==e?void 0:e.cartId)||_.current||(_.current=!0,h(e))},[_,h]),T=(0,q.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.filter(e=>{var{id:r}=e;return -1===t.findIndex(e=>{var{id:t}=e;return"".concat(r)==="".concat(t)})})},[]),A=(0,q.useCallback)(e=>{var{cartItems:t=[],itemsToAdd:r=[]}=e,i=[...t];return r.forEach(e=>{var t=(0,g.Qk)({asset:e}),r=i.findIndex(r=>{var{id:i,type:n}=r;return"".concat(i)==="".concat(e.id)&&n===t});r>-1?i[r]=(0,n._)({},e):i.unshift((0,a._)((0,n._)({},e),{addedTime:new Date}))}),i},[]),k=(0,q.useCallback)(function(){var e=(0,i._)(function*(e){var t,{items:r,licenseId:a,licenseAsJpeg:s}=e;return Promise.all(null==r?void 0:r.map((t=(0,i._)(function*(e){var t=(0,g.Qk)({asset:e}),r=a||e.licenseId,i=s||e.licenseAsJpeg,o=yield(0,y.og)({asset:e,licenseName:r});return{item_id:e.id,item_type:t,metadata:{cart:(0,n._)({license_id:r,license_as_jpeg:i,subscription_id:e.subscriptionId,size:o.content_size,format:o.content_format,sizes:(0,y.Rj)({asset:e}),search_context:C(e),source:[d.uH,d.rr].some(e=>e===t)?m.Au:""},t===d.m$&&{angle:o.angle})}}}),function(e){return t.apply(this,arguments)})))});return function(t){return e.apply(this,arguments)}}(),[C]),E=(0,q.useCallback)(function(){var e=(0,i._)(function*(e){var{cart:r,eventLabel:i,gridItems:u,isPrimary:d=!0,itemsToAdd:m,licenseId:_,formatType:h,licensePrice:y,mutateCart:g,withOptimisticUpdate:w=!0,pageSection:I,listId:T}=e;try{var E=m.map(e=>(0,a._)((0,n._)({},e),{meta:(0,n._)({search_context:C(e)},e.meta)}));s({status:"",error:void 0}),p(!1);var P=A({cartItems:r.items,itemsToAdd:E});if(P.length>v.Zm){s({status:l.Nz}),p(!0);return}w&&g(e=>(0,a._)((0,n._)({},e),{items:P}));var j=(0,o.bE)({urlParams:{isPrimary:d}}).formattedUrl,x=yield k({items:E,licenseId:_,licenseAsJpeg:h===c.kr});yield F.C2.post(j,x),s({status:l.qO}),S(m),d&&E.forEach(e=>{var t=r.items.find(t=>{var{id:r}=t;return"".concat(r)==="".concat(e.id)});t&&_!==t.licenseId&&b({cart:r,eventLabel:i,gridItems:u,items:[e],matchingCartItem:t,pageSection:I}),f({cart:r,eventLabel:i,gridItems:u,items:[e],licenseId:_,licensePrice:y,pageSection:I,listId:T})})}catch(e){s({status:l.Nz,error:e})}finally{yield t.invalidateQueries({queryKey:[J({isPrimary:d,isLedger:!0})]}),yield t.invalidateQueries({queryKey:[J({isPrimary:d})]})}});return function(t){return e.apply(this,arguments)}}(),[A,k,C,f,b,t,S]),P=(0,q.useCallback)(function(){var e=(0,i._)(function*(e){var{cartData:r,eventLabel:i,gridItems:s,isPrimary:l=!0,itemsToRemove:c=[],mutateCart:u,pageSection:d,routePathProps:v,withOptimisticUpdate:m=!0,mutateCallback:p}=e;try{m&&u(e=>(0,a._)((0,n._)({},e),{items:T(e.items,c)}),!1);var _=(0,o.dt)({urlParams:{isPrimary:l}}).formattedUrl;yield F.C2.delete(_,{data:c.map(e=>({item_id:e.id,item_type:(0,g.Qk)({asset:e})}))}),l&&b({cart:r,eventLabel:i,gridItems:s,items:c,pageSection:d}),v&&w.push(...v)}catch(e){}finally{p?p({isPrimary:l}):(yield t.invalidateQueries({queryKey:[J({isPrimary:l,isLedger:!0})]}),yield t.invalidateQueries({queryKey:[J({isPrimary:l})]}))}});return function(t){return e.apply(this,arguments)}}(),[T,b,w,t]);return{triggerCartViewedEvent:I,addCartItems:E,removeCartItems:P,moveToSaveForLater:(0,q.useCallback)(function(){var e=(0,i._)(function*(e){var{eventLabel:t,itemsToMove:r,pageSection:i,primaryCart:c,savedForLaterCart:u,mutatePrimaryCart:d,mutateSavedForLaterCart:m}=e;s({status:"",error:void 0}),p(!1);var _=A({cartItems:u.items,itemsToAdd:r});if(_.length>v.Zm)throw s({status:l.Nz}),p(!0),Error(V);d(e=>(0,a._)((0,n._)({},e),{items:T(e.items,r)}),!1),m(e=>(0,a._)((0,n._)({},e),{items:_}),!1);var f=(0,o.cb)({urlParams:{fromCartType:v.jT,toCartType:v.pw}}).formattedUrl,h=yield k({items:r});yield F.C2.post(f,h),b({cart:c,eventLabel:t,items:r,pageSection:i})});return function(t){return e.apply(this,arguments)}}(),[A,k,b,T]),moveToPrimary:(0,q.useCallback)(function(){var e=(0,i._)(function*(e){var{itemsToMove:t,primaryCart:r,mutatePrimaryCart:i,mutateSavedForLaterCart:c}=e;s({status:"",error:void 0}),p(!1);var u=A({cartItems:r.items,itemsToAdd:t});if(u.length>v.Zm)throw s({status:l.Nz}),p(!0),Error(V);c(e=>(0,a._)((0,n._)({},e),{items:T(e.items,t)})),i(e=>(0,a._)((0,n._)({},e),{items:u}));var d=(0,o.cb)({urlParams:{fromCartType:v.pw,toCartType:v.jT}}).formattedUrl,m=yield k({items:t});yield F.C2.post(d,m),f({cart:r,items:t})});return function(t){return e.apply(this,arguments)}}(),[A,k,f,T]),addToCartStatus:r,setAddToCartStatus:s,isSizeLimitWarning:u}},er=e=>{var{cartItems:t}=e,{data:r}=(0,L.R7)(),i=(0,U.h)(),{isLoading:n}=i,a=(0,s._)(i,["isLoading"]),o=(e=>{var{items:t}=e;return null==t?void 0:t.some(e=>{var{hasCreditsRemaining:t}=e;return!t})})({items:t}),{amountType:l,hasInsufficientSubscriptionCredits:c,insufficientAmount:u,hasLowDebitableBalance:d}=(0,k.E)({items:t,isLoading:!r||n,subscriptions:r,userCapabilities:a});return{amountType:l,isDebitableUser:(0,w.fY)({userCapabilities:a}),userCanViewDebitableBalance:(0,w.Pl)({userCapabilities:a}),hasInsufficientCartItemsCredits:o,hasInsufficientSubscriptionCredits:c,insufficientAmount:u,hasLowDebitableBalance:d}},ei=e=>{var{items:t}=e;return null==t?void 0:t.some(e=>{var{hasCreditsRemaining:t}=e;return!t})},en=e=>{var{cartItems:t,assetEligibleSubscriptions:r}=e,i=(0,U.h)(),{isLoading:n}=i,a=(0,s._)(i,["isLoading"]),o=(0,O.k)();if(n)return{};var l=ei({items:t}),{hasInsufficientSubscriptionCredits:c,insufficientAmount:u,hasLowDebitableBalance:d,amountType:v}=I({items:t,assetEligibleSubscriptions:r,canShowLedgerLowBalance:o})||{};return{amountType:v,isDebitableUser:(0,w.fY)({userCapabilities:a}),userCanViewDebitableBalance:(0,w.Pl)({userCapabilities:a}),hasInsufficientCartItemsCredits:l,hasInsufficientSubscriptionCredits:c,insufficientAmount:u,hasLowDebitableBalance:d}}},67666:(e,t,r)=>{r.d(t,{F:()=>f});var i=r(51220),n=r(87011),a=r(93096),s=r(22980),o=r(98917),l=r(86380),c=r(23069),u=r(46131),d=r(29862),v=r(91894),m=function(){var e=(0,i._)(function*(e){var{items:t,trackingId:r}=e;0!==t.length&&(yield(0,v.A)("/message-gateway/ip-review",(0,a._)((0,n._)({method:"POST",requireAuth:!0},(0,d.H)({trackingId:r})),{body:{media:t.map(e=>({mediaId:e}))}})))});return function(t){return e.apply(this,arguments)}}(),p=r(93251),_=r(55729),f=function(){var e,{trackingId:t="",updateRequestCache:r,onComplete:d=()=>{}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},v=(0,u.s)("/"),{isBrandEnterprise:f}=(0,c.P)(),h=(0,p.jE)();return{queueIpReview:(0,_.useCallback)((e=(0,i._)(function*(e){if(f){var i,c,u=Array.isArray(e)?e:[e],p=u.reduce((e,t)=>(0,o.iu)(t)?[...e,String(t.id)]:e,[]);if(p.length){var _=(yield h.fetchQuery({queryKey:(0,l.IF)({assetIds:p}),queryFn:e=>{var{queryKey:t}=e;return(0,l.tz)(v,t)}})).reduce((e,t)=>(null==t?void 0:t.isIpReviewed)===!1&&(null==t?void 0:t.ipReviewStatus)!==s.eG?[...e,t]:e,[]);try{if(_.length){yield m({items:_.map(e=>null==e?void 0:e.classicId),trackingId:t});var y=_.map(e=>(h.setQueryData(e.queryKey,[(0,a._)((0,n._)({},e),{isIpReview:!1,ipReviewStatus:s.eG})]),h.invalidateQueries({queryKey:e.queryKey,predicate:t=>{var{queryKey:r}=t;return r===e.queryKey}})));yield Promise.all([...r?[r({reviewStatus:s.eG})]:[],...y]),d(u)}}catch(e){null===(c=window.NREUM)||void 0===c||null===(i=c.noticeError)||void 0===i||i.call(c,e,{message:"Error adding assets to queue for IP review: ".concat(_.map(e=>null==e?void 0:e.classicId).join(", "),"\ntrackingId: ").concat(t)})}}}}),function(t){return e.apply(this,arguments)}),[f,h,v,t,r,d])}}},68958:(e,t,r)=>{r.d(t,{I:()=>n});var i=r(30500),n=e=>{var{canShowLedgerLowBalance:t,hasInsufficientSubscriptionCredits:r=!1,units:n,amount:a,initialCommitment:s}=e;if(r)return!1;var o=i.Gy[n];return t&&o?Number(a)<=o:Number(a)<=Number(s)*i.O7}},73681:(e,t,r)=>{r.d(t,{z:()=>E,k:()=>P});var i=r(51220),n=r(6029),a=r(66092),s=r(13304),o=r(55729),l=r(87011),c=r(92424),u=r(36640),d=r(71024),v=r.n(d),m=v()(()=>Promise.all([r.e(27510),r.e(72076),r.e(69108),r.e(97300),r.e(77618),r.e(43366),r.e(23100),r.e(76191),r.e(27273)]).then(r.bind(r,95695)).then(e=>({default:e.AddToCartDialog})),{loadableGenerated:{webpack:()=>[95695]},ssr:!1}),p=v()(()=>Promise.all([r.e(27510),r.e(72076),r.e(69108),r.e(97300),r.e(77618),r.e(43366),r.e(23100),r.e(76191),r.e(27273),r.e(49414)]).then(r.bind(r,63882)).then(e=>({default:e.AddToCartDialogLedger})),{loadableGenerated:{webpack:()=>[63882]},ssr:!1}),_=e=>{var{isActive:t}=e,r=(0,c._)(e,["isActive"]),i=(0,s.G)(t),a=(0,u.A)();return i&&(0,n.jsx)(a?p:m,(0,l._)({isActive:t},r))},f=r(93096),h=r(26114),y=r(78586),g=r(70235),b=r(48973),C=r(14264),w=r(43765),S=r(23069),I=r(68880),T=e=>{var{status:t,isSizeLimitWarning:r,alertLabels:i}=e;return r?i.sizeLimitWarning:t===b.qO?i.addToCartSuccess:i.addToCartWarning},A=e=>{var{isOpen:t,isSizeLimitWarning:r=!1,addToCartStatus:i,snackBarActionAllowed:a=!0,handleSnackbarClose:s}=e,{t:o}=(0,I.Bd)(h.evH),{status:c,error:u}=i,d={addToCartSuccess:o("common:actions_added_to_cart"),addToCartWarning:o("notifications:label_add_to_cart_failure"),sizeLimitWarning:o("ent:cart_size_limit_warning",{LIMIT:C.Zm}),viewActionLabel:o("common:actions_view")},v=T({status:c,isSizeLimitWarning:r,alertLabels:d}),{isBrandEnterprise:m}=(0,S.P)(),{viewCartAction:p}=(0,y.Z)(),_=(0,w.Y)(),A={onClick:()=>{s(),m?_():p()},label:d.viewActionLabel};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(g.DynamicSnackbar,(0,f._)((0,l._)({},i.status===b.qO&&a&&{alertAction:A}),{alertSeverity:c,error:u,handleSnackbarClose:s,isOpen:t&&!!c,message:v}))})},k={status:"",error:void 0},E=e=>{var{addToCartStatus:t=k,assets:r=null,eventLabel:i,gridItems:a=null,isAddToCartDialogActive:o,isPrimary:l,isSnackBarOpen:c,isSizeLimitWarning:u,onAddToCart:d,onAlertSnackbarClose:v,setIsAddToCartDialogActive:m,pageSection:p,listId:f,snackBarActionAllowed:h=!0}=e;return(0,s.G)(r)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(_,{assets:r,eventLabel:i,gridItems:a,isActive:o,isPrimary:l,listId:f,onAddToCart:d,pageSection:p,setIsActive:m}),(0,n.jsx)(A,{snackBarActionAllowed:h,addToCartStatus:t,handleSnackbarClose:v,isOpen:c,isSizeLimitWarning:u})]}):null},P=function(){var e,t,{withOptimisticUpdate:r=!0,setIsVerifying:n,snackBarActionAllowed:s=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[l,c]=(0,o.useState)(!1),[u,d]=(0,o.useState)(!1),[v,m]=(0,o.useState)(null),[p,_]=(0,o.useState)(null),[f,h]=(0,o.useState)(!0),[y,g]=(0,o.useState)(null),[b,C]=(0,o.useState)(null),[w,S]=(0,o.useState)(null),{addCartItems:I,moveToSaveForLater:T,moveToPrimary:A,addToCartStatus:k,isSizeLimitWarning:P,notAddedSelectVideos:j}=(0,a.Nc)();(0,o.useEffect)(()=>()=>m(null),[]);var x=(0,o.useCallback)(e=>{var{assets:t,eventLabel:i,licenseId:a,formatType:s,licensePrice:o,cart:l,mutateCart:c,notAddedSelectVideoIds:u,pageSection:m,listId:_}=e;null==n||n(!0),d(!0),I({cart:l,eventLabel:i,gridItems:p,isPrimary:f,itemsToAdd:t||v,licenseId:a,formatType:s,licensePrice:o,mutateCart:c,notAddedSelectVideoIds:u,withOptimisticUpdate:r,pageSection:m,listId:_})},[v,p,I,f,n,r]),N=(0,o.useCallback)((e=(0,i._)(function*(e){var{itemsToMove:t,primaryCart:r,mutatePrimaryCart:i,mutateSavedForLaterCart:a}=e;null==n||n(!0),d(!0);try{yield A({itemsToMove:t,primaryCart:r,mutatePrimaryCart:i,mutateSavedForLaterCart:a})}catch(e){null==n||n(!1)}}),function(t){return e.apply(this,arguments)}),[A,n]),O=(0,o.useCallback)((t=(0,i._)(function*(e){var{itemsToMove:t,primaryCart:r,savedForLaterCart:i,mutatePrimaryCart:a,mutateSavedForLaterCart:s}=e;null==n||n(!0),d(!0);try{yield T({itemsToMove:t,primaryCart:r,savedForLaterCart:i,mutatePrimaryCart:a,mutateSavedForLaterCart:s})}catch(e){null==n||n(!1)}}),function(e){return t.apply(this,arguments)}),[T,n]);return{addToCartViewsProps:(0,o.useMemo)(()=>({addToCartStatus:k,assets:v,eventLabel:w,gridItems:p,isAddToCartDialogActive:l,isPrimary:f,isSizeLimitWarning:P,isSnackBarOpen:u,onAddToCart:x,onAlertSnackbarClose:()=>d(!1),notAddedSelectVideos:j,setIsAddToCartDialogActive:c,pageSection:y,listId:b,snackBarActionAllowed:s}),[v,p,k,w,b,y,l,f,P,u,j,x,s]),addToCartViewsHandler:(0,o.useCallback)(e=>{var{assets:t,eventLabel:r,gridItems:i,isMoveToPrimaryCart:n=!1,isMoveToSavedForLaterCart:a=!1,isPrimaryCart:s=!0,mutatePrimaryCart:o,mutateSavedForLaterCart:l,primaryCart:u,savedForLaterCart:d,withDialog:v=!0,licenseId:p,licensePrice:f,pageSection:y,listId:b}=e;if(m(t),h(s),g(y),S(r),C(b),i&&_(i),n){N({itemsToMove:t,primaryCart:u,mutatePrimaryCart:o,mutateSavedForLaterCart:l});return}if(a){O({itemsToMove:t,primaryCart:u,savedForLaterCart:d,mutatePrimaryCart:o,mutateSavedForLaterCart:l});return}v?c(!0):x({assets:t,eventLabel:r,cart:u,licenseId:p,licensePrice:f,mutateCart:o,pageSection:y})},[x,N,O]),AddToCartViews:E}}},85076:(e,t,r)=>{r.d(t,{E:()=>o});var i=r(30500),n=r(71335),a=r(10545),s=r(3399),o=e=>{var t,{items:r,isLoading:o,subscription:l,subscriptions:c,userCapabilities:u}=e;return o?{}:(l&&(t=l.creditType),c&&c.length>0&&(t=c[0].creditType),(0,n.fY)({userCapabilities:u})?(0,s.h)({items:r,subscription:l,subscriptions:c,hasWrapperSubscription:(0,n.GT)({userCapabilities:u})}):{amountType:t||i.EV,hasLowDebitableBalance:!1,hasInsufficientSubscriptionCredits:l&&0===(0,a.J)({subscription:l}),insufficientAmount:null})}},87778:(e,t,r)=>{r.d(t,{J9:()=>a,M5:()=>n});var i=r(40252),n=()=>{var e="/email/ss_premier_sub_account_activation_email";return{url:e,formattedUrl:(0,i.format)({pathname:e})}},a=()=>{var e="/email/premier_cart_confirmation";return{url:e,formattedUrl:(0,i.format)({pathname:e})}}},88969:(e,t,r)=>{r.d(t,{i:()=>o});var i=r(73923),n=r(98848),a=r(67974),s=r(55729),o=()=>{var{analytics:e}=(0,a.pn)(),{getSearchContext:t}=(0,n.J)();return(0,s.useCallback)(r=>{var{assets:n=[]}=r,a=t(n[0]);e.productLicensed({products:n.map(e=>(0,i.Un)({asset:e,shouldGetSearchContextFromAsset:!0})),search_context:a})},[e,t])}},95683:(e,t,r)=>{r.r(t),r.d(t,{MosaicAssetGridWithViews:()=>b});var i=r(87011),n=r(93096),a=r(6029),s=r(40943),o=r(92424),l=r(40081),c=r(6987),u=r(73681),d=r(45371),v=r(15549),m=r(59044),p=r(33449),_=e=>{var{assetOverlayProps:t}=e,r=(0,o._)(e,["assetOverlayProps"]),{assets:s,hideAddToCart:_,hideSimilarAction:f,onAddToCollectionsComplete:h,listId:y,showInlineSimilarity:g}=r,{assetType:b}=(0,p.BF)(),{AddToCartViews:C,addToCartViewsHandler:w,addToCartViewsProps:S}=(0,u.k)(),{AddToCollectionViews:I,addToCollectionViewsHandler:T,addToCollectionViewsProps:A,isModalOpen:k,handleCloseModal:E,collectionProps:P}=(0,d.X)({initialAssetType:b}),{PreviewModal:j,previewModalProps:x,onAssetModalHandler:N}=(0,c.l)({addToCartViewsHandler:w,addToCollectionViewsHandler:T,assets:s,compLicensingHandler:null,licensingAssetId:null,withGoToPageAction:!0,withNavigationArrows:!0,listId:y,SecondaryActionsComponent:void 0,analyticsEventSection:void 0}),O=(0,m.sD)(null==s?void 0:s[0]);return(0,a.jsxs)(a.Fragment,{children:[k&&(0,a.jsx)(v.p,(0,i._)({modalIsOpen:k,handleClose:E},O&&{collectionProps:P})),(0,a.jsx)(l.MosaicAssetGrid,(0,i._)({assetOverlayProps:(0,i._)({listId:y,addToCartViewsHandler:w,addToCollectionViewsHandler:T,onAssetModalHandler:N,shouldHideOnImageMobile:!0},t),showInlineSimilarity:g},r)),(0,a.jsx)(C,(0,i._)({},S)),(0,a.jsx)(I,(0,i._)({onAddToCollectionsComplete:h},A)),(0,a.jsx)(j,(0,n._)((0,i._)({},x),{hideAddToCart:_,hideSimilarAction:f,showActionIcons:!0}))]})},f=r(64984),h=e=>{var{assetOverlayProps:t}=e,r=(0,o._)(e,["assetOverlayProps"]),{assets:s,hideAddToCart:v,onAddToCollectionsComplete:m,listId:_,showInlineSimilarity:h}=r,{assetType:y}=(0,p.BF)(),{CompLicensingViews:g,licensingAssetId:b,compLicensingProps:C,compLicensingHandler:w}=(0,f.x)(),{AddToCartViews:S,addToCartViewsHandler:I,addToCartViewsProps:T}=(0,u.k)(),{AddToCollectionViews:A,addToCollectionViewsHandler:k,addToCollectionViewsProps:E}=(0,d.X)({initialAssetType:y}),{PreviewModal:P,previewModalProps:j,onAssetModalHandler:x}=(0,c.l)({addToCartViewsHandler:I,addToCollectionViewsHandler:k,assets:s,compLicensingHandler:w,licensingAssetId:b,withGoToPageAction:!0,withNavigationArrows:!0,listId:_,SecondaryActionsComponent:void 0,analyticsEventSection:void 0});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.MosaicAssetGrid,(0,i._)({assetOverlayProps:(0,i._)({listId:_,addToCartViewsHandler:I,addToCollectionViewsHandler:k,compLicensingHandler:w,licensingAssetId:b,onAssetModalHandler:x},t),showInlineSimilarity:h},r)),(0,a.jsx)(S,(0,i._)({},T)),(0,a.jsx)(A,(0,i._)({onAddToCollectionsComplete:m},E)),(0,a.jsx)(P,(0,n._)((0,i._)({},j),{hideAddToCart:v,showActionIcons:!0})),(0,a.jsx)(g,(0,i._)({},C))]})},y=r(23069),g=r(78042),b=e=>{var{setThroughProvider:t,assets:r,isBrandSstk:o}=(0,s.N)(),{isBrandEnterprise:l}=(0,y.P)(),c=(0,g.a)(),{assets:u}=e,d=t?r:u;switch("".concat(c?"MOBILE":"DESKTOP","_").concat((t?o:!l)?"ECOMM":"ENTERPRISE")){case"MOBILE_ENTERPRISE":case"DESKTOP_ENTERPRISE":return(0,a.jsx)(h,(0,n._)((0,i._)({},e),{assets:d}));default:return(0,a.jsx)(_,(0,n._)((0,i._)({},e),{assets:d}))}}},95807:(e,t,r)=>{r.d(t,{V:()=>i});var i=e=>{var{subscriptions:t,licenseName:r}=e;return null==t?void 0:t.find(e=>e.license===r)}},96887:(e,t,r)=>{r.d(t,{K:()=>o});var i=r(85650),n=r(95807),a=e=>{var t,{licenses:r,subscriptions:i}=e;return r.some(e=>t=(0,n.V)({subscriptions:i,licenseName:e})),t},s=e=>{var{existingAssetLicenses:t,licenseType:r,licenseName:i,subscriptions:n}=e;return i==="footage_".concat(r,"_sd")?a({licenses:(null==t?void 0:t.includes("footage_".concat(r,"_hd")))?["footage_".concat(r,"_hd")]:["footage_".concat(r,"_sd"),"footage_".concat(r,"_hd")],subscriptions:n}):i==="footage_".concat(r,"_lowres")?(null==t?void 0:t.includes("footage_".concat(r,"_hd")))?a({licenses:["footage_".concat(r,"_hd")],subscriptions:n}):(null==t?void 0:t.includes("footage_".concat(r,"_sd")))?a({licenses:["footage_".concat(r,"_sd")],subscriptions:n}):a({licenses:["footage_".concat(r,"_lowres")],subscriptions:n}):void 0},o=e=>{var{existingAssetLicenses:t,subscriptions:r,licenseName:a}=e;if([i.UiI,i.eJJ,i.P2I,i.vWp,i.N8V,i.j35,i.eS$,i.Kwu,i.O_b,i.OSP,i.FO6,i.Fc7].some(e=>e===a)||i.CkD.some(e=>e===a))return(0,n.V)({subscriptions:r,licenseName:a});if([i.eNn,i.AWs,i.H8O,i.GO9].some(e=>e===a))return(0,n.V)({subscriptions:r,licenseName:i.eNn});var o=s({existingAssetLicenses:t,licenseType:i.$Me,licenseName:a,subscriptions:r}),l=s({existingAssetLicenses:t,licenseType:i.Lyy,licenseName:a,subscriptions:r}),c=s({existingAssetLicenses:t,licenseType:i.kTi,licenseName:a,subscriptions:r}),u=s({existingAssetLicenses:t,licenseType:i.IDD,licenseName:a,subscriptions:r});return o||l||c||u||void 0}}}]);
//# sourceMappingURL=95683-64039436e0825b28.js.map